# Migration `20200715210951-added`

This migration has been generated by mingyuchoo at 7/15/2020, 9:09:51 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
PRAGMA foreign_keys=OFF;

CREATE TABLE "User" (
"id" INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
"createdAt" DATE NOT NULL DEFAULT CURRENT_TIMESTAMP,
"email" TEXT NOT NULL,
"name" TEXT NOT NULL)

CREATE TABLE "Profile" (
"id" INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
"bio" TEXT NOT NULL,
"userId" INTEGER NOT NULL,FOREIGN KEY ("userId") REFERENCES "User"("id") ON DELETE CASCADE ON UPDATE CASCADE)

CREATE TABLE "Post" (
"id" INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
"createdAt" DATE NOT NULL DEFAULT CURRENT_TIMESTAMP,
"title" TEXT NOT NULL,
"published" BOOLEAN NOT NULL DEFAULT false,
"authorId" INTEGER NOT NULL,FOREIGN KEY ("authorId") REFERENCES "User"("id") ON DELETE CASCADE ON UPDATE CASCADE)

CREATE TABLE "Category" (
"id" INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
"name" TEXT NOT NULL)

CREATE TABLE "_CategoryToPost" (
"A" INTEGER NOT NULL,
"B" INTEGER NOT NULL,FOREIGN KEY ("A") REFERENCES "Category"("id") ON DELETE CASCADE ON UPDATE CASCADE,
FOREIGN KEY ("B") REFERENCES "Post"("id") ON DELETE CASCADE ON UPDATE CASCADE)

CREATE UNIQUE INDEX "User.email" ON "User"("email")

CREATE UNIQUE INDEX "Profile_userId" ON "Profile"("userId")

CREATE UNIQUE INDEX "_CategoryToPost_AB_unique" ON "_CategoryToPost"("A","B")

CREATE  INDEX "_CategoryToPost_B_index" ON "_CategoryToPost"("B")

PRAGMA foreign_key_check;

PRAGMA foreign_keys=ON;
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200715162436-initial..20200715210951-added
--- datamodel.dml
+++ datamodel.dml
@@ -1,10 +1,7 @@
-// This is your Prisma schema file,
-// learn more about it in the docs: https://pris.ly/d/prisma-schema
-
 datasource db {
   provider = "sqlite"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
@@ -15,4 +12,36 @@
   director     String
   movieName    String
   yearReleased Int
 }
+
+model User {
+  id        Int      @default(autoincrement()) @id
+  createdAt DateTime @default(now())
+  email     String   @unique
+  name      String
+  posts     Post[]
+  profile   Profile?
+}
+
+model Profile {
+  id     Int    @default(autoincrement()) @id
+  bio    String
+  user   User   @relation(fields: [userId], references: [id])
+  userId Int
+}
+
+model Post {
+  id         Int        @default(autoincrement()) @id
+  createdAt  DateTime   @default(now())
+  title      String
+  published  Boolean    @default(false)
+  categories Category[] @relation(references: [id])
+  author     User       @relation(fields: [authorId], references: [id])
+  authorId   Int
+}
+
+model Category {
+  id    Int    @default(autoincrement()) @id
+  name  String
+  posts Post[] @relation(references: [id])
+}
```


