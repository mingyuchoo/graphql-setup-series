# Migration `20200928201212`

This migration has been generated by mingyuchoo at 9/29/2020, 5:12:12 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE `root`.`categories` ADD COLUMN `createdAt` datetime(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP(3),
ADD COLUMN `updatedAt` datetime(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP(3)

ALTER TABLE `root`.`comments` ADD COLUMN `createdAt` datetime(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP(3),
ADD COLUMN `updatedAt` datetime(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP(3),
MODIFY `id` int NOT NULL AUTO_INCREMENT

ALTER TABLE `root`.`posts` MODIFY `updatedAt` datetime(3) NOT NULL DEFAULT CURRENT_TIMESTAMP(3)

ALTER TABLE `root`.`profiles` ADD COLUMN `createdAt` datetime(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP(3),
ADD COLUMN `updatedAt` datetime(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP(3)

ALTER TABLE `root`.`tags` ADD COLUMN `createdAt` datetime(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP(3),
ADD COLUMN `updatedAt` datetime(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP(3)

ALTER TABLE `root`.`users` MODIFY `role` ENUM('ADMIN', 'USER', 'CUSTOMER') NOT NULL DEFAULT 'USER',
MODIFY `updatedAt` datetime(3) NOT NULL DEFAULT CURRENT_TIMESTAMP(3)
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200928195351..20200928201212
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource db {
   provider = "mysql"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
@@ -21,19 +21,21 @@
   lastName  String?
   isAdmin   Boolean  @default(false)
   role      Role     @default(USER)
   createdAt DateTime @default(now())
-  updatedAt DateTime @updatedAt
+  updatedAt DateTime @default(now())
   posts     Post[]
   profile   Profile?
   @@map("users")
 }
 model Profile {
-  id     Int    @id @default(autoincrement())
-  bio    String
-  user   User   @relation(fields: [userId], references: [id])
-  userId Int
+  id        Int      @id @default(autoincrement())
+  bio       String
+  user      User     @relation(fields: [userId], references: [id])
+  userId    Int
+  createdAt DateTime @default(now())
+  updatedAt DateTime @default(now())
   @@map("profiles")
 }
 model Post {
@@ -41,9 +43,9 @@
   title      String
   content    String?
   published  Boolean    @default(false)
   createdAt  DateTime   @default(now())
-  updatedAt  DateTime   @updatedAt
+  updatedAt  DateTime   @default(now())
   author     User?      @relation(fields: [authorId], references: [id])
   authorId   Int?
   categories Category[] @relation(references: [id])
   comments   Comment[]
@@ -53,25 +55,31 @@
   @@map("posts")
 }
 model Category {
-  id    Int    @id @default(autoincrement())
-  name  String
-  posts Post[] @relation(references: [id])
+  id        Int      @id @default(autoincrement())
+  name      String
+  posts     Post[]   @relation(references: [id])
+  createdAt DateTime @default(now())
+  updatedAt DateTime @default(now())
   @@map("categories")
 }
 model Comment {
-  id      Int    @id
-  title   String
-  content String
-  Post    Post?  @relation(fields: [postId], references: [id])
-  postId  Int?
+  id        Int      @id @default(autoincrement())
+  title     String
+  content   String
+  Post      Post?    @relation(fields: [postId], references: [id])
+  postId    Int?
+  createdAt DateTime @default(now())
+  updatedAt DateTime @default(now())
   @@map("comments")
 }
 model Tag {
-  name   String @id
-  Post   Post?  @relation(fields: [postId], references: [id])
-  postId Int?
+  name      String   @id
+  Post      Post?    @relation(fields: [postId], references: [id])
+  postId    Int?
+  createdAt DateTime @default(now())
+  updatedAt DateTime @default(now())
   @@map("tags")
 }
```


